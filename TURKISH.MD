# 0G Chain Validator Kurulum - Foundry ile

<div align="center">

[![0G Chain](https://img.shields.io/static/v1?label=0G&message=Chain&color=blue&style=for-the-badge)](https://0g.ai)
[![Foundry](https://img.shields.io/static/v1?label=Foundry&message=v1.2.3&color=green&style=for-the-badge)](https://github.com/foundry-rs/foundry)
[![Ubuntu](https://img.shields.io/static/v1?label=Ubuntu&message=18.04%2B&color=orange&style=for-the-badge)](https://ubuntu.com)
[![Lisans](https://img.shields.io/static/v1?label=Lisans&message=MIT&color=yellow&style=for-the-badge)](LICENSE)

**ğŸš€ Foundry kullanarak 0G Chain validator kurulum ve yÃ¶netim rehberi**

[ğŸ“‹ Gereksinimler](#-gereksinimler) â€¢ [ğŸš€ Kurulum](#-kurulum) â€¢ [âš™ï¸ YapÄ±landÄ±rma](#ï¸-yapÄ±landÄ±rma) â€¢ [ğŸ› ï¸ YÃ¶netim](#ï¸-yÃ¶netim) â€¢ [âš ï¸ Sorun Giderme](#ï¸-sorun-giderme)

---

</div>

## ğŸ“‹ Gereksinimler

### DonanÄ±m Gereksinimleri
| BileÅŸen | Testnet | Mainnet |
|---------|---------|---------|
| **RAM** | 64 GB | 64 GB |
| **CPU** | 8 Ã§ekirdek | 8 Ã§ekirdek |
| **Depolama** | 4 TB NVME SSD | 1 TB NVME SSD |
| **AÄŸ** | 100 Mbps | 100 Mbps |

### YazÄ±lÄ±m Gereksinimleri
- âœ… **Ubuntu 22.04+** veya Debian tabanlÄ± Linux
- âœ… **0G Node** senkronize ve Ã§alÄ±ÅŸÄ±yor
- âœ… **32+ OG Token** stake iÃ§in
- âœ… **Root/sudo eriÅŸimi**
- âœ… **KararlÄ± internet baÄŸlantÄ±sÄ±**

### AÄŸ Bilgileri (Testnet)
```bash
AÄŸ AdÄ±: 0G-Galileo-Testnet
Chain ID: 16601
RPC URL: https://evmrpc-testnet.0g.ai
Explorer: https://chainscan-galileo.0g.ai
Faucet: https://faucet.0g.ai
```

---

## ğŸš€ Kurulum

### 1. Sistem KontrolÃ¼
```bash
# Sistem uyumluluÄŸunu kontrol et
echo "=== Sistem Bilgileri ==="
uname -a && arch && lsb_release -a

# Gerekli paketleri yÃ¼kle
sudo apt update && sudo apt install -y curl jq

# 0G node senkronize mi kontrol et
curl -s http://localhost:26657/status | jq .result.sync_info.catching_up
# kENDÄ° RPC PORTUNU KULLAN DEFAULT:26557 SonuÃ§: false olmalÄ± (senkronize)
```

### 2. Foundry Kurulumu
```bash
# Foundry kurulu mu kontrol et
which cast && which forge && echo "âœ… Foundry zaten kurulu" || echo "âŒ Foundry kurulumu gerekli"

# Foundry kur
curl -L https://foundry.paradigm.xyz | bash
source ~/.bashrc
foundryup

# Kurulumu doÄŸrula
echo "=== Foundry Versiyon Bilgileri ==="
cast --version
forge --version
anvil --version
```

### 3. 0G Chain BaÄŸlantÄ±sÄ±nÄ± Test Et
```bash
# 0G testnet baÄŸlantÄ±sÄ±nÄ± test et
echo "=== 0G Chain BaÄŸlantÄ± Testi ==="

# Chain ID kontrol et (16601 dÃ¶nmeli)
cast chain-id --rpc-url https://evmrpc-testnet.0g.ai

# GÃ¼ncel blok numarasÄ±nÄ± al
cast block-number --rpc-url https://evmrpc-testnet.0g.ai

# Staking contract okuma testi
cast call 0xea224dBB52F57752044c0C86aD50930091F561B9 \
    "validatorCount()(uint32)" \
    --rpc-url https://evmrpc-testnet.0g.ai
```

---

## âš™ï¸ YapÄ±landÄ±rma

### 1. Ortam DeÄŸiÅŸkenleri
```bash
# Node data path'inizi ayarlayÄ±n (gerÃ§ek path'inize gÃ¶re dÃ¼zenleyin)
export HOME_DIR=/root/.0gchaind/0g-home/0gchaind-home
export GENESIS_PATH=$HOME_DIR/config/genesis.json
export CHAIN_SPEC=devnet

# 0G Testnet konfigÃ¼rasyonu
export RPC_URL=https://evmrpc-testnet.0g.ai
export STAKING_CONTRACT=0xea224dBB52F57752044c0C86aD50930091F561B9

# Stake miktarlarÄ± (EVM ve Cosmos iÅŸlemleri iÃ§in farklÄ±)
export INITIAL_STAKE_EVM=32000000000000000000    # EVM/cast komutlarÄ± iÃ§in 32 OG (wei cinsinden)
export INITIAL_STAKE_COSMOS=32000000000          # 0gchaind komutlarÄ± iÃ§in 32 OG (Cosmos formatÄ±)

# KalÄ±cÄ± hale getir (~/.bashrc'ye ekle)
echo "export RPC_URL=https://evmrpc-testnet.0g.ai" >> ~/.bashrc
echo "export STAKING_CONTRACT=0xea224dBB52F57752044c0C86aD50930091F561B9" >> ~/.bashrc
echo "export INITIAL_STAKE_EVM=32000000000000000000" >> ~/.bashrc
echo "export INITIAL_STAKE_COSMOS=32000000000" >> ~/.bashrc
```

### 2. Gerekli DosyalarÄ± DoÄŸrula
```bash
# Gerekli dosyalarÄ±n varlÄ±ÄŸÄ±nÄ± kontrol et
ls -la $HOME_DIR/config/genesis.json || echo "âŒ genesis.json bulunamadÄ±!"
ls -la $HOME_DIR/config/priv_validator_key.json || echo "âŒ priv_validator_key.json bulunamadÄ±!"

# 0gchaind binary'sinin eriÅŸilebilir olduÄŸunu kontrol et
which 0gchaind || echo "âŒ 0gchaind PATH'de deÄŸil!"
```

### 3. Validator Key'lerini OluÅŸtur
```bash
# Validator public key oluÅŸtur
echo "=== Validator Key'leri OluÅŸturuluyor ==="
0gchaind deposit validator-keys \
  --home $HOME_DIR \
  --chaincfg.chain-spec=$CHAIN_SPEC

# Ã‡Ä±ktÄ± Ã¶rneÄŸi:
# Eth/Beacon Pubkey (Compressed 48-byte Hex):
# 0xaa0f99735a6436d6b7ed763c2eaa8452d753c5152a4fb1e4dc0bd7e33bcfc8cd4fac0e2d6cbab941f423c17728fecc56
```

**âš ï¸ Ã–NEMLÄ°:** Ã‡Ä±ktÄ±dan 48-byte pubkey'i kopyalayÄ±n:
```bash
# GerÃ§ek pubkey'inizi buraya yazÄ±n
export PUBKEY=0xaa0f99735a6436d6b7ed763c2eaa8452d753c5152a4fb1e4dc0bd7e33bcfc8cd4fac0e2d6cbab941f423c17728fecc56
```

### 4. Validator Contract Adresini Hesapla
```bash
# Validator contract adresini hesapla
echo "=== Validator Contract Adresi HesaplanÄ±yor ==="
VALIDATOR_CONTRACT=$(cast call $STAKING_CONTRACT \
    "computeValidatorAddress(bytes)(address)" \
    $PUBKEY \
    --rpc-url $RPC_URL)

echo "Validator Contract Adresi: $VALIDATOR_CONTRACT"
export VALIDATOR_CONTRACT=$VALIDATOR_CONTRACT
```

### 5. Ä°mza OluÅŸtur
```bash
# Validator imzasÄ± oluÅŸtur (Cosmos formatÄ± kullanarak)
echo "=== Validator Ä°mzasÄ± OluÅŸturuluyor ==="
0gchaind deposit create-validator \
  $VALIDATOR_CONTRACT \
  $INITIAL_STAKE_COSMOS \
  $GENESIS_PATH \
  --home $HOME_DIR \
  --chaincfg.chain-spec=$CHAIN_SPEC

# Ã‡Ä±ktÄ± Ã¶rneÄŸi:
# âœ… Deposit message created successfully!
# pubkey: 0xaa0f99735a6436d6b7ed763c2eaa8452d753c5152a4fb1e4dc0bd7e33bcfc8cd4fac0e2d6cbab941f423c17728fecc56
# signature: 0x8d9f2e7a6b5c4d3e8f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e...
```

**âš ï¸ Ã–NEMLÄ°:** Ã‡Ä±ktÄ±dan imzayÄ± kopyalayÄ±n:
```bash
# GerÃ§ek imzanÄ±zÄ± buraya yazÄ±n
export SIGNATURE=0x8d9f2e7a6b5c4d3e8f1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e...
```

### 6. CÃ¼zdan HazÄ±rla
```bash
# Private key'inizi ayarlayÄ±n (MetaMask'tan alÄ±n)
# âš ï¸ GÃœVENLÄ°K: Private key'inizi hiÃ§ kimseyle paylaÅŸmayÄ±n!
export PRIVATE_KEY=0x1234567890abcdef...  # GerÃ§ek private key'inizi girin

# CÃ¼zdan bakiyesini kontrol edin (32+ OG olmalÄ±)
export YOUR_WALLET_ADDRESS=0x...  # CÃ¼zdan adresinizi girin
cast balance $YOUR_WALLET_ADDRESS --rpc-url $RPC_URL --ether
```

### 7. Validator'Ä± Kaydet
```bash
# Validator'Ä± staking contract'Ä±na kaydet (EVM formatÄ± kullanarak)
echo "=== Validator Kaydediliyor ==="
cast send $STAKING_CONTRACT \
  "createAndInitializeValidatorIfNecessary((string,string,string,string,string),uint32,uint96,bytes,bytes)" \
  "('Validator AdÄ±nÄ±z','keybase-id','https://websiteniz.com','guvenlik@emailiniz.com','Validator aÃ§Ä±klamanÄ±z')" \
  50000 \
  1 \
  $PUBKEY \
  $SIGNATURE \
  --value $INITIAL_STAKE_EVM \
  --gas-limit 1000000 \
  --gas-price 50000000000 \
  --private-key $PRIVATE_KEY \
  --rpc-url $RPC_URL

# Transaction hash alacaksÄ±nÄ±z
# Ã–rnek: 0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
```

#### Parametre AÃ§Ä±klamalarÄ±:
- `'Validator AdÄ±nÄ±z'`: Validator'Ä±nÄ±zÄ±n gÃ¶rÃ¼nen adÄ±
- `'keybase-id'`: Keybase kimliÄŸi (opsiyonel)
- `'https://websiteniz.com'`: Web sitenizin URL'si (opsiyonel)
- `'guvenlik@emailiniz.com'`: Ä°letiÅŸim email adresi
- `'Validator aÃ§Ä±klamanÄ±z'`: KÄ±sa aÃ§Ä±klama
- `50000`: %5 komisyon oranÄ± (50000/1000000)
- `1`: 1 gwei Ã§ekim Ã¼creti

---

## ğŸ” DoÄŸrulama

### 1. Transaction Durumunu Kontrol Et
```bash
# Transaction'Ä± explorer'da kontrol et
echo "Transaction'Ä±nÄ±zÄ± kontrol edin: https://chainscan-galileo.0g.ai"

# Transaction durumunu doÄŸrula (gerÃ§ek tx hash'inizi yazÄ±n)
cast tx 0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef --rpc-url $RPC_URL
```

### 2. Validator KaydÄ±nÄ± DoÄŸrula
```bash
# Validator'Ä±n kayÄ±tlÄ± olup olmadÄ±ÄŸÄ±nÄ± kontrol et
echo "=== Validator KayÄ±t KontrolÃ¼ ==="

# Validator contract adresini al
cast call $STAKING_CONTRACT \
    "getValidator(bytes)(address)" \
    $PUBKEY \
    --rpc-url $RPC_URL

# Validator bakiyesini kontrol et (32000000000000000000 gÃ¶stermeli)
cast call $VALIDATOR_CONTRACT \
    "tokens()(uint256)" \
    --rpc-url $RPC_URL

# Komisyon oranÄ±nÄ± kontrol et (50000 gÃ¶stermeli)
cast call $VALIDATOR_CONTRACT \
    "commissionRate()(uint32)" \
    --rpc-url $RPC_URL

# Delegator paylarÄ±nÄ± kontrol et
cast call $VALIDATOR_CONTRACT \
    "delegatorShares()(uint256)" \
    --rpc-url $RPC_URL
```

### 3. Node LoglarÄ±nÄ± Ä°zle
```bash
# Node loglarÄ±nda validator aktivasyonunu izle
tail -f $HOME_DIR/../log/0gchaind.log | grep -i validator

# Consensus katÄ±lÄ±mÄ±nÄ± kontrol et
curl -s http://localhost:26657/validators | jq '.result.validators[] | select(.pub_key.value != null)'
```

---

## ğŸ› ï¸ YÃ¶netim

### Komisyon Ã‡ekme
```bash
# KazanÄ±lan komisyonu Ã§ek (sadece validator operatÃ¶rÃ¼ yapabilir)
cast send $VALIDATOR_CONTRACT \
    "withdrawCommission(address)" \
    $YOUR_WALLET_ADDRESS \
    --gas-limit 1000000 \
    --gas-price 50000000000 \
    --private-key $PRIVATE_KEY \
    --rpc-url $RPC_URL
```

### Delegation Bilgilerini Kontrol Et
```bash
# Toplam delegator paylarÄ±nÄ± gÃ¶rÃ¼ntÃ¼le
cast call $VALIDATOR_CONTRACT \
    "delegatorShares()(uint256)" \
    --rpc-url $RPC_URL

# Belirli bir delegator'Ä±n paylarÄ±nÄ± kontrol et
cast call $VALIDATOR_CONTRACT \
    "getDelegation(address)(address,uint256)" \
    $DELEGATOR_ADDRESS \
    --rpc-url $RPC_URL

# Paylar iÃ§in tahmini token deÄŸeri hesapla
# FormÃ¼l: (paylar * toplamToken) / toplamPaylar
```

### Ek Token Delegate Et
```bash
# Validator'Ä±nÄ±za daha fazla stake ekle
cast send $VALIDATOR_CONTRACT \
    "delegate(address)" \
    $YOUR_WALLET_ADDRESS \
    --value 1000000000000000000 \
    --gas-limit 1000000 \
    --gas-price 50000000000 \
    --private-key $PRIVATE_KEY \
    --rpc-url $RPC_URL
```

### Undelegate (Ä°leri Seviye)
```bash
# PaylarÄ± undelegate et (Ã§ekim Ã¼creti gerekir)
cast send $VALIDATOR_CONTRACT \
    "undelegate(address,uint256)" \
    $WITHDRAWAL_ADDRESS \
    $SHARES_AMOUNT \
    --value 1000000000000000000 \
    --gas-limit 1000000 \
    --gas-price 50000000000 \
    --private-key $PRIVATE_KEY \
    --rpc-url $RPC_URL
```

### AÄŸ Ä°statistikleri
```bash
# Toplam validator sayÄ±sÄ±
cast call $STAKING_CONTRACT \
    "validatorCount()(uint32)" \
    --rpc-url $RPC_URL

# Maksimum validator sayÄ±sÄ±
cast call $STAKING_CONTRACT \
    "maxValidatorCount()(uint32)" \
    --rpc-url $RPC_URL

# GÃ¼ncel gas fiyatÄ±
cast gas-price --rpc-url $RPC_URL
```

---

## âš ï¸ Sorun Giderme

### YaygÄ±n Hatalar

#### 1. "insufficient funds"
```bash
# CÃ¼zdan bakiyesini kontrol et
cast balance $YOUR_WALLET_ADDRESS --rpc-url $RPC_URL --ether
# En az 32.1 OG gerekli (gas iÃ§in extra)

# Faucet'tan test token al
echo "Token almak iÃ§in: https://faucet.0g.ai"
```

#### 2. "DelegationBelowMinimum"
```bash
# EVM iÅŸlemleri iÃ§in stake miktarÄ±nÄ± kontrol et
echo $INITIAL_STAKE_EVM
# Tam olarak 32000000000000000000 olmalÄ± (32 OG wei cinsinden)

# Cosmos iÅŸlemleri iÃ§in stake miktarÄ±nÄ± kontrol et
echo $INITIAL_STAKE_COSMOS
# Tam olarak 32000000000 olmalÄ± (32 OG Cosmos formatÄ±nda)
```

#### 3. "signature mismatch"
```bash
# Ä°mzayÄ± yeniden oluÅŸtur (Cosmos formatÄ± kullanarak)
0gchaind deposit create-validator \
  $VALIDATOR_CONTRACT \
  $INITIAL_STAKE_COSMOS \
  $GENESIS_PATH \
  --home $HOME_DIR \
  --chaincfg.chain-spec=$CHAIN_SPEC
```

#### 4. "command not found: 0gchaind"
```bash
# 0gchaind'in PATH'de olup olmadÄ±ÄŸÄ±nÄ± kontrol et
which 0gchaind

# Gerekirse PATH'e ekle
export PATH=$PATH:/path/to/0gchaind/bin
echo 'export PATH=$PATH:/path/to/0gchaind/bin' >> ~/.bashrc
```

#### 5. "invalid opcode"
```bash
# DoÄŸru EVM versiyonunu kullandÄ±ÄŸÄ±nÄ±zdan emin olun
# Contract'lar --evm-version cancun ile derlenmiÅŸ olmalÄ±
```

### Debug KomutlarÄ±
```bash
# Node senkronizasyon durumunu kontrol et
curl -s http://localhost:26657/status | jq .result.sync_info

# AÄŸ baÄŸlantÄ±sÄ±nÄ± kontrol et
curl -s https://evmrpc-testnet.0g.ai >/dev/null && echo "âœ… RPC eriÅŸilebilir" || echo "âŒ BaÄŸlantÄ± sorunu"

# Son bloÄŸu gÃ¶rÃ¼ntÃ¼le
cast block latest --rpc-url $RPC_URL

# Transaction pool'unu kontrol et
cast tx-pool --rpc-url $RPC_URL
```

### SaÄŸlÄ±k Kontrol Script'i
```bash
#!/bin/bash
echo "=== 0G Validator SaÄŸlÄ±k KontrolÃ¼ ==="

echo "1. Node senkronizasyon durumu:"
curl -s http://localhost:26657/status | jq -r .result.sync_info.catching_up

echo "2. Validator contract adresi:"
cast call $STAKING_CONTRACT "getValidator(bytes)(address)" $PUBKEY --rpc-url $RPC_URL

echo "3. Validator bakiyesi:"
cast call $VALIDATOR_CONTRACT "tokens()(uint256)" --rpc-url $RPC_URL

echo "4. Komisyon oranÄ±:"
cast call $VALIDATOR_CONTRACT "commissionRate()(uint32)" --rpc-url $RPC_URL

echo "5. Toplam aÄŸ validator sayÄ±sÄ±:"
cast call $STAKING_CONTRACT "validatorCount()(uint32)" --rpc-url $RPC_URL

echo "6. CÃ¼zdan bakiyesi:"
cast balance $YOUR_WALLET_ADDRESS --rpc-url $RPC_URL --ether

echo "7. Stake miktarlarÄ±:"
echo "   EVM formatÄ±: $INITIAL_STAKE_EVM"
echo "   Cosmos formatÄ±: $INITIAL_STAKE_COSMOS"

echo "=== SaÄŸlÄ±k kontrolÃ¼ tamamlandÄ± ==="
```

---

## âœ… BaÅŸarÄ± Kriterleri

Validator kurulumunuz baÅŸarÄ±lÄ± ise:

- âœ… **Transaction onaylandÄ±** - Explorer'da SUCCESS durumu gÃ¶sterir
- âœ… **getValidator()** validator contract adresinizi dÃ¶ndÃ¼rÃ¼r
- âœ… **tokens()** 32000000000000000000 (32 OG wei cinsinden) dÃ¶ndÃ¼rÃ¼r
- âœ… **Node loglarÄ±** validator aktivasyon mesajlarÄ± gÃ¶sterir
- âœ… **Consensus katÄ±lÄ±mÄ±** - Validator validator set'te gÃ¶rÃ¼nÃ¼r

---

## ğŸ“š Kaynaklar

### Resmi Linkler
- **DokÃ¼mantasyon**: https://docs.0g.ai
- **GitHub**: https://github.com/0glabs
- **Block Explorer**: https://chainscan-galileo.0g.ai
- **Faucet**: https://faucet.0g.ai

### Contract Adresleri
- **Staking Contract**: `0xea224dBB52F57752044c0C86aD50930091F561B9`

### RPC Endpoint'leri
- **Birincil**: https://evmrpc-testnet.0g.ai
- **QuickNode**: Ã–zel endpoint mevcut
- **ThirdWeb**: Ã–zel endpoint mevcut

### Destek
- **Discord**: [0G Labs TopluluÄŸu](https://discord.gg/0glabs)
- **Telegram**: Resmi 0G KanalÄ±
- **GitHub Issues**: Teknik problemler iÃ§in

---

## ğŸ“„ Lisans

Bu rehber MIT LisansÄ± altÄ±nda yayÄ±nlanmÄ±ÅŸtÄ±r. Detaylar iÃ§in [LICENSE](LICENSE) dosyasÄ±na bakÄ±n.

---

<div align="center">

**ğŸ‰ Tebrikler! ArtÄ±k bir 0G Chain validator'Ä± Ã§alÄ±ÅŸtÄ±rÄ±yorsunuz! ğŸ‰**

*Bu rehber faydalÄ± olduysa, lÃ¼tfen â­ bu repository'yi yÄ±ldÄ±zlayÄ±n!*

</div>
